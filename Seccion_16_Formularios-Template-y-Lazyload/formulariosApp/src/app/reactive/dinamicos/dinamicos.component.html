<h2>Reactive: <small>Din√°micos</small></h2>

<div class="row">
    <div class="col">
        <form [formGroup]="miFormulario" (ngSubmit)="guardar()"
            autocomplete="off">
            <!-- Nombre -->
            <div class="mb-3 row">
                <label class="col-sm-3 col-form-label">Nombre</label>
                <div class="col-sm-9">
                    <input type="text" 
                        class="form-control" 
                        formControlName="nombre"
                        placeholder="Nombre de la persona">

                    <span *ngIf="campoEsValido('nombre')"
                        class="form-text text-danger">
                        Este campo es obligarorio
                    </span>
                </div>                
            </div>

            <!-- Agregar -->
            <div class="mb-3 row">
                <label class="col-sm-3 col-form-label">Agregar</label>
                <div class="col-sm-9">

                    <div class="input-group">
                        <input type="text" 
                            class="form-control"
                            [formControl]="nuevoFavorito"
                            (keyup.enter)="addFavorito()"                        
                            placeholder="Agregar Favorito">   
                        <button class="btn btn-outline-primary"
                            (click)="addFavorito()"
                            type="button">
                            Agregar
                        </button>                
                    </div>
                    
                </div>                
            </div>

            <!-- Lista de juegos favoritos -->
            <div class="mb-3 row">
                <label class="col-sm-3 col-form-label">Favoritos</label>
                <div class="col-sm-9" formArrayName="favoritos">
                    
                    <div *ngFor="let favorito of favoritosArr.controls; let i = index;"
                        class="input-group mb-1">
                        <input [formControlName]="i"
                            type="text" class="form-control">

                        <button class="btn btn-outline-danger"
                            (click)="deleteFavorito(i)"
                            type="button">
                            Eliminar
                        </button> 
                        <!-- 
                        <div *ngIf="favorito.invalid && favorito.touched">
                            <div *ngIf="item.errors.required">This field is required</div>
                            <div *ngIf="item.errors.minlength">Minimum length is {{ item.errors.minlength.requiredLength }}</div> 
                          </div>
                        -->
                    </div>    
                          
                    <span *ngIf="campoFavoritoValido()"
                            class="form-text text-danger">
                            El valor del los campos favoritos son obligatorios                            
                    </span>
                    
                </div>
                <span  *ngIf="favoritosArr.length === 0"
                    class="col-sm-9 form-text text-danger">
                    Los campos favoritos son obligatorios                            
                </span>
            </div>

            <div class="row">                
                <div class="col-sm-12">
                    <button type="button"
                        (click)="guardar()"
                        class="btn btn-primary float-end">
                        Guardar
                    </button>
                </div>                
            </div>
        </form>
    </div>
</div>

<div class="row">
    <div class="col">
        <h3>Formulario</h3>
        <span>Valid</span>
        <pre>{{miFormulario.valid}}</pre>

        <span>Pristine</span>
        <pre>{{miFormulario.pristine}}</pre>

        <span>Touched</span>
        <pre>{{miFormulario.touched}}</pre>
        
        <hr>
        <h3>Favoritos</h3>
        <span>Agregar juego</span>
        <pre>{{nuevoFavorito.valid}}</pre>
        <pre>{{nuevoFavorito.value}}</pre>
        <span>Pristine</span>
        <pre>{{nuevoFavorito.pristine}}</pre>

        <span>Touched</span>
        <pre>{{nuevoFavorito.touched}}</pre>

        <span>Value</span>
        <pre>{{miFormulario.value | json}}</pre>        
    </div>
</div> 